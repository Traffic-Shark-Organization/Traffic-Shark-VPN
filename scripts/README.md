# –°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ OpenVPN

–≠—Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è OpenVPN —Å–µ—Ä–≤–µ—Ä–æ–º.

–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã –Ω–∞ Bash –∏ —Ç—Ä–µ–±—É—é—Ç root –ø—Ä–∞–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

---

## üìú –°–ø–∏—Å–æ–∫ —Å–∫—Ä–∏–ø—Ç–æ–≤

### 0. auto-deploy-vpn.sh ‚≠ê –ù–û–í–´–ô
**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ OpenVPN —Å–µ—Ä–≤–µ—Ä–∞**

–ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ production-ready OpenVPN —Å–µ—Ä–≤–µ—Ä–∞.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
sudo ./scripts/auto-deploy-vpn.sh
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç**:
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã (–û–°, –≤–µ—Ä—Å–∏—è, —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)
2. ‚úÖ –°–±–æ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ)
3. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã (apt update && upgrade)
4. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤ (OpenVPN, Easy-RSA, Fail2Ban, UFW/iptables)
5. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ IP forwarding
6. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ Certificate Authority (4096-bit RSA)
7. ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
8. ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è OpenVPN (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è 50+ –∫–ª–∏–µ–Ω—Ç–æ–≤)
9. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firewall (UFW –∏–ª–∏ iptables –Ω–∞ –≤—ã–±–æ—Ä)
10. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Fail2Ban (–∑–∞—â–∏—Ç–∞ –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞)
11. ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã (—Å–µ—Ç—å, –ª–∏–º–∏—Ç—ã, TCP BBR)
12. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
13. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞
14. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
15. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
16. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –±—ç–∫–∞–ø–æ–≤

**–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- IP/–¥–æ–º–µ–Ω —Å–µ—Ä–≤–µ—Ä–∞ (–∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ)
- –°–µ—Ç–µ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ)
- –¢–∏–ø Firewall: UFW –∏–ª–∏ iptables
- DNS —Å–µ—Ä–≤–µ—Ä—ã: Cloudflare, Google –∏–ª–∏ Quad9
- –î–∞–Ω–Ω—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –¥–ª—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- –ò–º—è –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞

**–í—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏**: 5-10 –º–∏–Ω—É—Ç

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π VPN —Å–µ—Ä–≤–µ—Ä
- –ì–æ—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ `/root/scripts/`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –±—ç–∫–∞–ø—ã (3:00 AM)
- –ü–µ—Ä–≤—ã–π –∫–ª–∏–µ–Ω—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**:
- TLS 1.3, AES-256-GCM —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
- 4096-bit RSA –∫–ª—é—á–∏
- Fail2Ban –∑–∞—â–∏—Ç–∞
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π firewall
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**:
- [–ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ](../INSTALLATION.md)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](../QUICK_START.md)

---

### 1. create-client.sh
**–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π**

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç:
- RSA 4096 bit –∫–ª—é—á
- X.509 —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
- .ovpn —Ñ–∞–π–ª —Å inline —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
./scripts/create-client.sh <client_name>

# –ü—Ä–∏–º–µ—Ä—ã:
./scripts/create-client.sh john.doe
./scripts/create-client.sh alice.smith
./scripts/create-client.sh dev-server-1
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç**:
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ root
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
3. ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —á–µ—Ä–µ–∑ Easy-RSA
4. ‚úÖ –°–æ–∑–¥–∞–µ—Ç –±–∞–∑–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
5. ‚úÖ –°–æ–±–∏—Ä–∞–µ—Ç .ovpn —Ñ–∞–π–ª —Å inline —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏
6. ‚úÖ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (600)
7. ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—é

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:
- –§–∞–π–ª: `~/client-configs/files/<client_name>.ovpn`
- –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –Ω–∞ –ª—é–±–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤**:
```bash
ls -la ~/client-configs/files/
cat /etc/openvpn/easy-rsa/pki/index.txt | grep "^V"
```

---

### 2. revoke-client.sh
**–û—Ç–∑—ã–≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤**

–ë–µ–∑–æ–ø–∞—Å–Ω–æ –æ—Ç–∑—ã–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫–ª–∏–µ–Ω—Ç–∞ –∫ VPN.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
./scripts/revoke-client.sh <client_name>

# –ü—Ä–∏–º–µ—Ä:
./scripts/revoke-client.sh john.doe

# –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –æ—Ç–æ–∑–≤–∞–Ω–Ω—ã—Ö:
./scripts/revoke-client.sh --list
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç**:
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
2. ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–µ
3. ‚úÖ –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
4. ‚úÖ –í—ã–±–æ—Ä –ø—Ä–∏—á–∏–Ω—ã –æ—Ç–∑—ã–≤–∞ (RFC 5280)
5. ‚úÖ –û—Ç–∑—ã–≤–∞–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —á–µ—Ä–µ–∑ Easy-RSA
6. ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π CRL
7. ‚úÖ –ö–æ–ø–∏—Ä—É–µ—Ç CRL –≤ /etc/openvpn/
8. ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç OpenVPN
9. ‚úÖ –ê—Ä—Ö–∏–≤–∏—Ä—É–µ—Ç .ovpn —Ñ–∞–π–ª
10. ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—é

**–ü—Ä–∏—á–∏–Ω—ã –æ—Ç–∑—ã–≤–∞**:
- `unspecified` - –æ–±—â–∞—è –ø—Ä–∏—á–∏–Ω–∞
- `keyCompromise` - –∫–ª—é—á —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω
- `superseded` - –∑–∞–º–µ–Ω–µ–Ω –Ω–æ–≤—ã–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º
- `cessationOfOperation` - –ø—Ä–µ–∫—Ä–∞—â–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–ü—Ä–æ–≤–µ—Ä–∫–∞ CRL**:
```bash
openssl crl -in /etc/openvpn/crl.pem -noout -text
```

**‚ö†Ô∏è –í–∞–∂–Ω–æ**: –ü–æ—Å–ª–µ –æ—Ç–∑—ã–≤–∞ –∫–ª–∏–µ–Ω—Ç –Ω–µ —Å–º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –¥–∞–∂–µ —Å –≤–∞–ª–∏–¥–Ω—ã–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º!

---

### 3. setup-firewall.sh
**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ firewall**

–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç iptables –∏–ª–∏ UFW –¥–ª—è —Ä–∞–±–æ—Ç—ã OpenVPN.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
./scripts/setup-firewall.sh

# –°–∫—Ä–∏–ø—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π - –±—É–¥–µ—Ç –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç**:
1. ‚úÖ –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–µ—Ç–µ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
2. ‚úÖ –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π firewall (iptables/UFW)
3. ‚úÖ –°–æ–∑–¥–∞–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é —Ç–µ–∫—É—â–∏—Ö –ø—Ä–∞–≤–∏–ª
4. ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –±–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
5. ‚úÖ –†–∞–∑—Ä–µ—à–∞–µ—Ç SSH (–∑–∞—â–∏—Ç–∞ –æ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏)
6. ‚úÖ –†–∞–∑—Ä–µ—à–∞–µ—Ç OpenVPN –ø–æ—Ä—Ç (UDP/TCP)
7. ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç NAT (MASQUERADE)
8. ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç FORWARD –ø—Ä–∞–≤–∏–ª–∞
9. ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –æ—Å–Ω–æ–≤–Ω—ã—Ö –∞—Ç–∞–∫ (SYN flood, port scan)
10. ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
11. ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

**–§—É–Ω–∫—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**:
- Rate limiting –¥–ª—è SSH –∏ OpenVPN
- –ó–∞—â–∏—Ç–∞ –æ—Ç SYN flood
- –ó–∞—â–∏—Ç–∞ –æ—Ç ping flood
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ invalid –ø–∞–∫–µ—Ç–æ–≤
- –ó–∞—â–∏—Ç–∞ –æ—Ç port scanning

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª**:
```bash
# iptables
iptables -L -n -v
iptables -t nat -L -n -v

# UFW
ufw status verbose
```

**–û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π**:
```bash
# –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤:
ls -la /root/firewall-backups/

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ iptables
iptables-restore < /root/firewall-backups/iptables-backup-TIMESTAMP.txt
```

---

### 4. fix-client-for-mac.sh
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞ –¥–ª—è Mac OpenVPN Connect**

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–∑—ã–≤–∞—é—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ Mac.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
./scripts/fix-client-for-mac.sh <input.ovpn> [output.ovpn]

# –ü—Ä–∏–º–µ—Ä—ã:
./scripts/fix-client-for-mac.sh client1.ovpn client1-mac.ovpn
./scripts/fix-client-for-mac.sh ~/client-configs/files/client1.ovpn
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç**:
1. ‚úÖ –ü–æ–Ω–∏–∂–∞–µ—Ç TLS –≤–µ—Ä—Å–∏—é —Å 1.3 –¥–æ 1.2 (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Mac)
2. ‚úÖ –£–¥–∞–ª—è–µ—Ç user/group –¥–∏—Ä–µ–∫—Ç–∏–≤—ã (–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –Ω–∞ Mac)
3. ‚úÖ –£–¥–∞–ª—è–µ—Ç explicit-exit-notify –¥–ª—è UDP
4. ‚úÖ –£–ø—Ä–æ—â–∞–µ—Ç tls-cipher –¥–ª—è –ª—É—á—à–µ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
5. ‚úÖ –ó–∞–º–µ–Ω—è–µ—Ç compress migrate –Ω–∞ comp-lzo no
6. ‚úÖ –î–æ–±–∞–≤–ª—è–µ—Ç MTU –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
7. ‚úÖ –£–¥–∞–ª—è–µ—Ç reneg-sec 0 (–º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**:
- OpenVPN Connect –Ω–∞ Mac –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ
- –ù–µ—Ç –æ—à–∏–±–æ–∫, –Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
- "Connecting..." –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ

**–†–µ–∑—É–ª—å—Ç–∞—Ç**:
- –°–æ–∑–¥–∞—ë—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è .ovpn —Ñ–∞–π–ª–∞
- –ì–æ—Ç–æ–≤–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å OpenVPN Connect –Ω–∞ Mac
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞**:
```bash
# –°–æ–∑–¥–∞—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
./scripts/create-client.sh client1

# –ò—Å–ø—Ä–∞–≤–∏—Ç—å –¥–ª—è Mac
./scripts/fix-client-for-mac.sh ~/client-configs/files/client1.ovpn ~/client-configs/files/client1-mac.ovpn

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ Mac
scp ~/client-configs/files/client1-mac.ovpn user@mac:~/Downloads/
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Tunnelblick –≤–º–µ—Å—Ç–æ OpenVPN Connect, –æ–Ω –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª–µ–Ω –Ω–∞ Mac. –°–º. [TROUBLESHOOTING.md](../TROUBLESHOOTING.md#–ø—Ä–æ–±–ª–µ–º–∞-11-macos-–±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–µ-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ-–≤-openvpn-connect) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

---

### 5. monitor-connections.sh
**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–∫—Ç–∏–≤–Ω—ã—Ö VPN –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π**

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –∫–ª–∏–µ–Ω—Ç–æ–≤.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
# –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
./scripts/monitor-connections.sh

# –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å routing –∏ –ª–æ–≥–∞–º–∏
./scripts/monitor-connections.sh --full

# –†–µ–∂–∏–º —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫)
./scripts/monitor-connections.sh --watch

# –°–ø—Ä–∞–≤–∫–∞
./scripts/monitor-connections.sh --help
```

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç**:
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ (IP, uptime, —Å—Ç–∞—Ç—É—Å)
- ‚úÖ –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
- ‚úÖ IP –∞–¥—Ä–µ—Å–∞ (—Ä–µ–∞–ª—å–Ω—ã–π –∏ VPN)
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç—Ä–∞—Ñ–∏–∫–∞ (RX/TX)
- ‚úÖ –í—Ä–µ–º—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç—Ä–∞—Ñ–∏–∫–∞
- ‚úÖ –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (CPU, RAM, Disk)
- ‚úÖ [--full] Routing —Ç–∞–±–ª–∏—Ü–∞
- ‚úÖ [--full] –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è/–æ—Ç–∫–ª—é—á–µ–Ω–∏—è

**–ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ –≤ watch —Ä–µ–∂–∏–º–µ**:
- `Ctrl+C` - –≤—ã—Ö–æ–¥

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞**:
```
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
OpenVPN Connection Monitor - Traffic Shark VPN
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

‚ñ∂ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–°–µ—Ä–≤–µ—Ä: vpn-server
–í–Ω–µ—à–Ω–∏–π IP: 203.0.113.1
VPN IP: 10.8.0.1
Uptime: 5d 3h 21m
–°—Ç–∞—Ç—É—Å: active

‚ñ∂ –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–í—Å–µ–≥–æ –∫–ª–∏–µ–Ω—Ç–æ–≤: 12

–ö–ª–∏–µ–Ω—Ç               –†–µ–∞–ª—å–Ω—ã–π IP     VPN IP          RX           TX           –ü–æ–¥–∫–ª—é—á–µ–Ω
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
john.doe             198.51.100.5    10.8.0.2        125.43 MB    89.12 MB     2h 15m 33s
alice.smith          203.0.113.10    10.8.0.3        45.67 MB     23.45 MB     45m 12s
...
```

---

### 6. backup.sh
**–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ OpenVPN –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**

–°–æ–∑–¥–∞–µ—Ç –ø–æ–ª–Ω—ã–π –±—ç–∫–∞–ø –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
# –û–±—ã—á–Ω—ã–π –±—ç–∫–∞–ø
./scripts/backup.sh

# –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –±—ç–∫–∞–ø (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
./scripts/backup.sh --encrypt

# –°–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –±—ç–∫–∞–ø–æ–≤
./scripts/backup.sh --list

# –°–ø—Ä–∞–≤–∫–∞
./scripts/backup.sh --help
```

**–ß—Ç–æ –±—ç–∫–∞–ø–∏—Ç—Å—è**:
- ‚úÖ CA –∏ PKI (/etc/openvpn/easy-rsa/pki/)
- ‚úÖ –°–µ—Ä–≤–µ—Ä–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –∏ –∫–ª—é—á–∏
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞ (server.conf)
- ‚úÖ –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (~/client-configs/)
- ‚úÖ Firewall –ø—Ä–∞–≤–∏–ª–∞
- ‚úÖ –õ–æ–≥–∏ OpenVPN (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 10000 —Å—Ç—Ä–æ–∫)
- ‚úÖ –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–§–æ—Ä–º–∞—Ç –∞—Ä—Ö–∏–≤–∞**:
```
openvpn-backup-YYYYMMDD_HHMMSS.tar.gz
–∏–ª–∏
openvpn-backup-YYYYMMDD_HHMMSS.tar.gz.enc  (–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π)
```

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**:
```
/root/openvpn-backups/
```

**Retention policy**:
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ö—Ä–∞–Ω—è—Ç—Å—è –±—ç–∫–∞–ø—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π
- –°—Ç–∞—Ä—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è

**–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ**:
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –±—ç–∫–∞–ø–∞
./scripts/backup.sh --encrypt
# –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∫–æ–≥–¥–∞ –ø–æ–ø—Ä–æ—Å–∏—Ç

# –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞
openssl enc -aes-256-cbc -d -pbkdf2 \
  -in openvpn-backup-YYYYMMDD_HHMMSS.tar.gz.enc \
  -out openvpn-backup-YYYYMMDD_HHMMSS.tar.gz
```

**–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞**:
```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ OpenVPN
systemctl stop openvpn@server

# 2. –†–∞—Å–ø–∞–∫–æ–≤–∫–∞
tar -xzf openvpn-backup-YYYYMMDD_HHMMSS.tar.gz -C /tmp/

# 3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
cp -r /tmp/openvpn-backup-YYYYMMDD_HHMMSS/openvpn/* /etc/openvpn/
cp -r /tmp/openvpn-backup-YYYYMMDD_HHMMSS/easy-rsa/* /etc/openvpn/easy-rsa/
cp -r /tmp/openvpn-backup-YYYYMMDD_HHMMSS/firewall/iptables/* /etc/iptables/

# 4. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ firewall
iptables-restore < /etc/iptables/rules.v4

# 5. –ó–∞–ø—É—Å–∫ OpenVPN
systemctl start openvpn@server
systemctl status openvpn@server
```

**–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**:
```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ crontab –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –±—ç–∫–∞–ø–∞ –≤ 3:00
crontab -e

# –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É:
0 3 * * * /root/scripts/backup.sh --encrypt >> /var/log/openvpn-backup.log 2>&1
```

---

## üîß –û–±—â–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **OS**: Debian 13 –∏–ª–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π
- **–ü—Ä–∞–≤–∞**: root (sudo)
- **Shell**: Bash 4.0+
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: openvpn, easy-rsa, iptables

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
dpkg -l | grep -E "openvpn|easy-rsa"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ bash
bash --version

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
whoami  # –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å: root
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
```bash
# 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ firewall
./scripts/setup-firewall.sh

# 2. –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
./scripts/create-client.sh admin

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞
./scripts/monitor-connections.sh

# 4. –ü–µ—Ä–≤—ã–π –±—ç–∫–∞–ø
./scripts/backup.sh --encrypt
```

### –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
```bash
# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
./scripts/create-client.sh username

# –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
./scripts/revoke-client.sh username

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
./scripts/monitor-connections.sh
```

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ cron –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á
crontab -e

# –î–æ–±–∞–≤—å—Ç–µ:
# –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±—ç–∫–∞–ø –≤ 3:00 AM
0 3 * * * /root/scripts/backup.sh --encrypt >> /var/log/backup.log 2>&1

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –∫–∞–∂–¥—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫
0 9 * * 1 /root/scripts/check-cert-expiry.sh >> /var/log/cert-check.log 2>&1
```

---

## üêõ Troubleshooting

### –°–∫—Ä–∏–ø—Ç –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞
ls -la scripts/
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: -rwxr-xr-x

# –°–¥–µ–ª–∞–π—Ç–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x scripts/*.sh

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ shebang (–ø–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞)
head -1 scripts/create-client.sh
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: #!/bin/bash
```

### –û—à–∏–±–∫–∞ "Permission denied"
```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ sudo
sudo ./scripts/create-client.sh username

# –ò–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ root
sudo -i
cd /root/Traffic\ Shark\ VPN
./scripts/create-client.sh username
```

### –û—à–∏–±–∫–∞ "Easy-RSA not found"
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É
which easyrsa
ls -la /etc/openvpn/easy-rsa/

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
apt install easy-rsa
make-cadir /etc/openvpn/easy-rsa
```

### –õ–æ–≥–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤
```bash
# –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å–∫—Ä–∏–ø—Ç–æ–≤ –ø–∏—à—É—Ç –≤:
cat ~/client-configs/client-creation.log
cat ~/client-configs/revocation.log

# –°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏
journalctl -u openvpn@server -n 100
tail -100 /var/log/openvpn/openvpn.log
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: [../README.md](../README.md)
- **–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**: [../EXAMPLES.md](../EXAMPLES.md)
- **–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º**: [../TROUBLESHOOTING.md](../TROUBLESHOOTING.md)
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: [../SECURITY.md](../SECURITY.md)

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–∫—Ä–∏–ø—Ç–æ–≤

**‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è**:

1. **–ù–µ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã —Å root –ø—Ä–∞–≤–∞–º–∏**
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–¥ –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º**: `cat scripts/script-name.sh`
3. **–°–∫—Ä–∏–ø—Ç—ã –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞—Ä—É–∂—É** - –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ
4. **–ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è**
5. **–ü–∞—Ä–æ–ª–∏ –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è** - —Ç–æ–ª—å–∫–æ –≤ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏

**–ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
grep -E "curl|wget|nc|telnet|base64" scripts/*.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
ls -la scripts/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞
stat scripts/*.sh
```

---

## üí° –°–æ–≤–µ—Ç—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏** –ø–µ—Ä–µ–¥ production
2. **–î–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø—ã –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏**
3. **–õ–æ–≥–∏—Ä—É–π—Ç–µ –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** –¥–ª—è audit trail
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –∏–º–µ–Ω–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤** (john.doe, not user123)
5. **–†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏** —Å–∫—Ä–∏–ø—Ç–æ–≤
6. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–π—Ç–µ —Ä—É—Ç–∏–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏** —á–µ—Ä–µ–∑ cron
7. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è** –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –≤–Ω–æ—Å–∏—Ç–µ –≤ —Å–∫—Ä–∏–ø—Ç—ã

---

**–ê–≤—Ç–æ—Ä**: Traffic Shark VPN Infrastructure Team  
**–í–µ—Ä—Å–∏—è**: 1.0.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2025-11-17

